<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
>

<channel>
	<title>Alexandre Meslé</title>
	<atom:link href="http://alexandre-mesle.com/index.php/feed/" rel="self" type="application/rss+xml" />
	<link>http://alexandre-mesle.com</link>
	<description>Ma Page Perso</description>
	<lastBuildDate>Wed, 07 Sep 2016 23:12:12 +0000</lastBuildDate>
	<language>fr-FR</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	

<image>
	<url>https://i1.wp.com/alexandre-mesle.com/wp-content/uploads/2016/03/music3-glow-icon.png?fit=32%2C32</url>
	<title>Alexandre Meslé</title>
	<link>http://alexandre-mesle.com</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">122536382</site>	<item>
		<title>Grub, error 15</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/19/grub-error-15/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/19/grub-error-15/#respond</comments>
				<pubDate>Fri, 19 Feb 2016 11:55:34 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Déboires]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=260</guid>
				<description><![CDATA[Voilà ce qu&#8217;il se passe lorsque l&#8217;on bidouille trop son système, il vient un moment où des choses étranges se produisent. Il y a peu de temps de cela, après un redémarrage mahleureux, toutes les touches alphabétiques et numériques de... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/19/grub-error-15/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<p>Voilà ce qu&rsquo;il se passe lorsque l&rsquo;on bidouille trop son système, il vient un moment où des choses étranges se produisent. Il y a peu de temps de cela, après un redémarrage mahleureux, toutes les touches alphabétiques et numériques de mon clavier sont devenues des raccourcis de modification la résolution de mon écran. Seule une combinaison Ctrl + Alt + F1 me permettait, en mode konsole, de récupérer l&rsquo;usage des touches. J&rsquo;aurais bien volontier accédé au centre de configuration de KDE pour bidouiller la configuration de mon clavier. Mais ces fonctionnalités nécessite le mot de passe root, très difficile à saisir quand on n&rsquo;a plus de clavier&#8230; Comme il me semble que c&rsquo;était un problème de KDE, il me paraissait difficilement envisageable de le résoudre en ligne de commande. Une seule solution : la réinstallation.</p>
<p>Ma dernière réinstallation de Mandriva remontait à décembre, et je m&rsquo;en étais pour ainsi dire plutôt bien sorti, tout avait très bien fonctionné du premier coup. Comme mes fichiers se trouvaient sur une autre partition, je n&rsquo;avais aucune sauvegarde à faire, il me suffisait, purement et simmplement, de formater la partition racine de Linux. Cela se fit sans encombre, jusqu&rsquo;au redémarrage, où là, oh surprise ! Grub ne démarre pas en mode graphique et me balance l&rsquo;erreur :</p>
<pre>Error 15: file not found</pre>
<h3>Editer le menu de grub</h3>
<p>Je dus coller mon nez sur l&rsquo;écran pour examiner le message de plus près et m&rsquo;assurer que je n&rsquo;étais pas victime d&rsquo;une hallucination. J&rsquo;avais installé en décembre le même système, avec le même CD et exactement les mêmes paramètres, les mêmes partition du disque dur, et tout avait très bien fonctionné !<br />
Ne m&rsquo;habituant toujours pas aux erreurs incompréhensibles de Linux, je retroussais mes manches, bootais avec le Live-CD (ce qui ne se fait pas en deux minutes), et réinstallais Grub, en me disant qu&rsquo;il s&rsquo;agissait probablement d&rsquo;un accident. Je redémarre et là, même refrain. Je dûs retenir de toutes mes forces l&rsquo;envie irréstitible d&rsquo;arracher ma tour et de la faire passer par la fenêtre ! Je m&rsquo;en remettais aux conseils d&rsquo;élèves bien plus avisés que moi en système en leur expliquant le problème en échange de points supplémentaires au prochain examen, le verdict fut : vous allez dans le fichier truc, vous changez la ligne machin, ensuite vous tapez la commande bidule&#8230; Bref tout un tas de noms d&rsquo;invertébrés me laissant présager des heures pénibles à lutter depuis une ligne de commande. Toutefois, le nom du fichier</p>
<pre>/boot/grub/menu.lst</pre>
<p>fut évoqué et j&rsquo;allais y jeter un coup d&rsquo;oeil. Il contient en toute vraisemblance des indications permettant à Grub de savoir quelle partition booter, ou est le noyau de l&rsquo;OS, et quel est le fichier à exécuter en premier pour lancer le système. Le problème est que les chemins des fichiers commencent non pas pas des répertoires de la forme /dev/&#8230;, mais par des couples (hdi, j), où je conjecture que i est un numéro de disque et j un numéro de partition.<br />
Je redémarre le système et lorsque le menu de Grub apparaît, je saisis e pour éditer l&rsquo;option Linux. Deux lignes de la forme suivante apparaîssent alors</p>
<pre>
kernel (hd1, 4)/boot/vmlinuz ...
boot (hd1, 4)/boot/intrd.img ...
</pre>
<p>Et là qu&rsquo;un miracle me sortit de cet embarras, ce menu d&rsquo;édition fonctionne avec un système d&rsquo;autocomplétion. Cela signifie que lorsque le nom d&rsquo;un chemin où d&rsquo;un fichier est incomplet, il suffit de presser Tab pour que le nom soit completé automatiquement, ou du moins que des propositions de complétion s&rsquo;affichent. C&rsquo;est très pratique, car cela permet de savoir si le fichier mentionné existe. En tatônnant quelque peu, j&rsquo;ai fini par me rendre compte que le répertoire de mon fichier racine était</p>
<pre>
kernel (hd0,)/boot/vmlinuz ...
boot (hd0,)/boot/intrd.img ...
</pre>
<p>Ne me demandez pas pourquoi ni comment, je n&rsquo;en sais strictement rien. Je suppose juste que Mandriva a buggé en générant automatiquement menu.lst mais je comprends toujours pas pourquoi ça avait fonctionné en décembre.<br />
Après avoir réussi à booter le système, je me jettais sur le fichier menu.lst pour le modifier et en toute candeur je saisissais</p>
<pre>
su
emacs /boot/grub/menu.lst &amp;
</pre>
<p>C&rsquo;était oublier que comme le système venait d&rsquo;être installé, il n&rsquo;y avait pas emacs&#8230; L&rsquo;occasion était trop belle, vous aurez la suite de l&rsquo;histoire en lisant l&rsquo;article « Vi ou la mort ».</p>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/19/grub-error-15/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">260</post-id>	</item>
		<item>
		<title>Latex2html</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/19/latex2html/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/19/latex2html/#respond</comments>
				<pubDate>Fri, 19 Feb 2016 11:51:12 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Déboires]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=258</guid>
				<description><![CDATA[Latex est un logiciel de publication très puissant, essentiellement pour les textes scientifiques. Il permet de générer des documents dans plusieurs formats portables (ps, pdf, dvi, etc) et d&#8217;y inclure des formules mathématiques. Latex2html est un script en Perl permettant... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/19/latex2html/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<p>Latex est un logiciel de publication très puissant, essentiellement pour les textes scientifiques. Il permet de générer des documents dans plusieurs formats portables (ps, pdf, dvi, etc) et d&rsquo;y inclure des formules mathématiques. Latex2html est un script en Perl permettant de générer un site Web à partir d&rsquo;un document Latex. les formules mathématiques ne pouvant pas être représentées en HTML sont transformées en images et incluses dans les pages web. latex2html a deux inconvénients :</p>
<ul>
<li>Tout d&rsquo;abord, la conversion des images est très lente et ralentit considérablement l&rsquo;exécution. Il me faut au moins 5 minutes pour générer mon cours de maths.</li>
<li>Ensuite, son créateur s&rsquo;est détourné de son oeuvre et nous laisse nous débrouiller seuls depuis maintenant des années.</li>
</ul>
<p>Ces quelques inconvénients ont rendu pénible l&rsquo;installation et la configuration de ce logiciel sous Mandriva. Je m&rsquo;étais rabattu sur un autre logiciel très intéressant : Hevea. Ce logiciel a pour avantage d&rsquo;être très rapide et très stable, il a été developpé en Ocaml, est très souple d&rsquo;utilisation et abondamment documenté. Son seul gros défaut est qu&rsquo;il génère des formules mathématiques en MathsML, ce qui donne un rendu particulièrement laid. J&rsquo;ai pour ma part décidé d&rsquo;utiliser latex2html pour les cours de mathématiques et d&rsquo;algorithmique, parce qu&rsquo;un lexème sur deux est un symbole mathématique. Et j&rsquo;utilise Hevea pour les cours de programmation, dans lesquels il y a très peu de formules. Un autre inconvénient majeur d&rsquo;Hevea est qu&rsquo;il n&rsquo;est pas compatible avec tous les packages. J&rsquo;utilise entre autres le package algorithms2e pour rédiger les algorithmes et hevea ne les traite pas. Je suis donc obligé pour ces cours d&rsquo;écrire tous les algorithmes deux fois : une fois pour le pdf et une fois pour le site web. Je ne m&rsquo;étalerai pas davantage, Hevea est facile à installer, contrairement à son concurrent, c&rsquo;est pour ça que cette section s&rsquo;appelle latex2html sous Mandriva.</p>
<h3>Procédure d&rsquo;installation</h3>
<p>Tout d&rsquo;abord, téléchargez latex2html et installez-le en utilisant le gestionnaire de package :</p>
<pre>urpmi latex2html</pre>
<p>Ensuite, il suffit de saisir</p>
<pre>latex2html source.tex</pre>
<p>pour générer un site web à partir de source.tex</p>
<p>Malheureusement, vous aller constater que la génération des images échoue. Pas de panique ! Pour y remédier, ouvrez le fichier</p>
<pre>/usr/lib/latex2html/l2hconf.pm</pre>
<p>Allez à la ligne 53 et modifiez-là en</p>
<pre>$IMAGE_TYPE = $IMAGE_TYPES[1];</pre>
<p>Et là, le miracle devrait normalement s&rsquo;accomplir !</p>
<h3>Comment virer les grosses barres noires</h3>
<p>Certaines formules mathématiques, une fois converties en image, sont soulignées par une grosse barre noire tout autant vilaine que sans justification sémantique. Pour vous en débarasser, éditez le fichier :</p>
<pre>/usr/lib/latex2html/l2hconf.pm
</pre>
<p>Et commentez la ligne appelant DVITOPS avec l&rsquo;option -pPdf,</p>
<pre># Options for dvips as determined by configure
#
#$DVIPSOPT = ' -Ppdf  -E';<span style="font-family: Roboto, Helvetica, sans-serif; line-height: 1.5;"> </span></pre>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/19/latex2html/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">258</post-id>	</item>
		<item>
		<title>Oracle sous Linux</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/19/oracle-sous-linux/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/19/oracle-sous-linux/#respond</comments>
				<pubDate>Fri, 19 Feb 2016 11:47:57 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Déboires]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=256</guid>
				<description><![CDATA[L&#8217;absence de documentation et le non-respect des normes sont souvent la source d&#8217;une inutile perte de temps. L&#8217;installation d&#8217;Oracle sous Linux (Mandriva en particulier), une fois que l&#8217;on connait la procédure à suivre est un jeu d&#8217;enfant (si tout se... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/19/oracle-sous-linux/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<p>L&rsquo;absence de documentation et le non-respect des normes sont souvent la source d&rsquo;une inutile perte de temps. L&rsquo;installation d&rsquo;Oracle sous Linux (Mandriva en particulier), une fois que l&rsquo;on connait la procédure à suivre est un jeu d&rsquo;enfant (si tout se passe comme prévu bient entendu). La perte de temps est occasionné par le fait que contrairement à la plupart des logiciels, Oracle ne propose pas de dépôt (alors que même Google le fait !). Il est donc nécessaire de tout installer manuellement, y compris les dépendances. La documentation étant inexistante, et le logiciel à installer monstrueusement complexe, il est presque impossible de trouver tout seul la procédure (à moins d&rsquo;être le dieu du système).</p>
<p>J&rsquo;ai pour ma part passé un temps considérable sur cette installation, et force est de constater que j&rsquo;ai perdu beaucoup de temps parce que les informations dont j&rsquo;avais besoin étaient difficiles à trouver, parce qu&rsquo;il n&rsquo;existe qu&rsquo;un seul tutoriel décrivant de façon propre la procédure à suivre, et que j&rsquo;ai mis beaucoup de temps à le trouver. Avant de vous décrire les étapes de l&rsquo;installation, je vais vous décrire les symptômes que j&rsquo;ai rencontré.</p>
<p>L&rsquo;installation du rpm oracle-xe-10.2.0.1-1.0.i386.rpm se fait fort aisément avec la commande (ne le faites pas tout de suite, il y a des étapes à exécuter au préalable)</p>
<pre>rpm -ivh oracle-xe-10.2.0.1-1.0.i386.rpm</pre>
<p>C&rsquo;est cependant loin d&rsquo;être suffisant pour qu&rsquo;Oracle fonctionne. Si vous essayez de vous connecter sur <a href="http://127.0.0.1:8080/apex" class="broken_link">http://127.0.0.1:8080/apex</a>, vous avez un magnifique <strong>connexion refusée</strong>. Et si vous arrivez à lancer <strong>sqlplus</strong> en ligne de commande, vous aurez droit à :</p>
<pre>ERROR:
ORA-01034: ORACLE not available
ORA-27101: shared memory realm does not exist
Linux Error: 2: No such file or directory</pre>
<p>Le tutoriel que j&rsquo;avais utilisé dans un premier temps était totalement muet sur cette erreur, j&rsquo;en suis venu à me demander si je n&rsquo;étais pas le seul à avoir ce problème. J&rsquo;ai alors scruté le net à la recherche d&rsquo;une solution. Et cela en vain. On me décrivait sur les forums des symptômes proches, mais résultant malheureusement d&rsquo;erreurs différentes.</p>
<p>J&rsquo;ai fini par trouver une partie de la solution sur le site (site aujourd&rsquo;hui disparu) de Gilles Briard. Il y a ensuite diverses bidouilles à faire pour que le tout fonctionne. Avant de lire la suite, vous devriez désinstaller oracle :</p>
<pre>urpme oracle-xe</pre>
<h3>Installation du rpm</h3>
<p>Pour fonctionner, Oracle nécessite quelques rpms. Si Oracle, comme tout le monde utilisait des dépôts et gérait les dépendances, ça nous simplifierait grandement la vie. Comme ce n&rsquo;est pas le cas, il est nécessaire d&rsquo;installer manuellement les deux packages<strong>libaio</strong> et <strong>bc</strong>, en root :</p>
<pre>urpmi libaio bc</pre>
<p>Il faut ensuite d&rsquo;ajouter les lignes suivantes à la fin du fichier <strong>/etc/sysctl.conf</strong> :</p>
<pre>###########
# Valeurs pour Oracle XE
###########
kernel.shmall = 2097152
kernel.shmmax = 536870912
kernel.shmmni = 4096
fs.file-max = 65536
net.ipv4.ip_local_port_range = 1024 65000</pre>
<p>Puis lancer la commande</p>
<pre>sysctl -p</pre>
<p>Vous pouvez ensuite lancer l&rsquo;installation d&rsquo;Oracle avec la commande :</p>
<pre>rpm -ivh oracle-xe-10.2.0.1-1.0.i386.rpm</pre>
<p>Vous pouvez conserver tous les paramètres par défaut.</p>
<p>Si tout se passe comme prévu, il est possible pour vous d&rsquo;utiliser oracle en passant par<a href="http://127.0.0.1:8080/apex/" class="broken_link">http://127.0.0.1:8080/apex/</a>. Si vous souhaitez utiliser <strong>sqlplus</strong> en ligne de commande, il y a quelques manipulations supplémentaires à effectuer. Elles sont décrites dans la page suivante de l&rsquo;article.</p>
<h3>Utilisation de sqlplus en ligne de commande</h3>
<p>Certaines personnes, ont tout comme moi un goût prononcé pour la ligne de commande. Grande doit être leur frustration lorsqu&rsquo;on les force à utiliser Oracle via un navigateur. Les étapes suivantes vous permettront d&rsquo;utiliser <strong>sqlplus</strong> depuis la console.</p>
<p>Tout d&rsquo;abord, il vous faut localiser <strong>sqlplus</strong> dans votre arborescence. Sur mon système, il se trouve ici :</p>
<pre>/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin</pre>
<p>Il est possible que cela diffère légèrement sur votre système, vous ne devriez néanmoins pas avoir trop de difficultés à le localiser. Si une fois cela fait, vous lancez <strong>sqlplus</strong>, vous obtenez ce magnifique message d&rsquo;erreur :</p>
<pre>[klaus@localhost bin]$ ./sqlplus
Error 6 initializing SQL*Plus
Message file sp1.msb not found
SP2-0750: You may need to set ORACLE_HOME to your Oracle software directory</pre>
<p>A moins que vous souhaitiez perdre autant de temps que j&rsquo;en ai perdu, ne vous conformez pas au message que vous lisez. Il existe dans le même répertoire un script appelé <strong>oracle_env.sh</strong> et contenant les instructions suivantes :</p>
<pre>[klaus@localhost bin]$ more oracle_env.sh
ORACLE_HOME=/usr/lib/oracle/xe/app/oracle/product/10.2.0/server
export ORACLE_HOME
ORACLE_SID=XE
export ORACLE_SID
NLS_LANG=`$ORACLE_HOME/bin/nls_lang.sh`
export NLS_LANG
PATH=$ORACLE_HOME/bin:$PATH
export PATH
if [ $?LD_LIBRARY_PATH ]
then
        LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
else
        LD_LIBRARY_PATH=$ORACLE_HOME/lib
fi
export LD_LIBRARY_PATH</pre>
<p>Il s&rsquo;agit d&rsquo;un script qui positionne correctement toutes les variables d&rsquo;environnement nécessaires au bon fonctionnement d&rsquo;Oracle. Exécutez le script :</p>
<pre>[klaus@localhost bin]$ ORACLE_HOME=/usr/lib/oracle/xe/app/oracle/product/10.2.0/server
[klaus@localhost bin]$ export ORACLE_HOME
[klaus@localhost bin]$ ORACLE_SID=XE
[klaus@localhost bin]$ export ORACLE_SID
[klaus@localhost bin]$ NLS_LANG=`$ORACLE_HOME/bin/nls_lang.sh`
[klaus@localhost bin]$ export NLS_LANG
[klaus@localhost bin]$ PATH=$ORACLE_HOME/bin:$PATH
[klaus@localhost bin]$ export PATH
[klaus@localhost bin]$ if [ $?LD_LIBRARY_PATH ]
&gt; then
&gt;         LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
&gt; else
&gt;         LD_LIBRARY_PATH=$ORACLE_HOME/lib
&gt; fi
[klaus@localhost bin]$ export LD_LIBRARY_PATH</pre>
<p>Je l&rsquo;ai pour ma part exécuté comme un boucher : en copiant-collant dans la console le contenu du script. Libre à vous d&rsquo;utiliser des méthodes plus fines. Il est aisé de vérifier si ça a fonctionné, il suffit pour ce faire d&rsquo;afficher le contenu de la variable d&rsquo;environnement $PATH :</p>
<pre>[klaus@localhost bin]$ echo $PATH
/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin:/usr/bin:/bin:/usr/local/bin:/usr/X11R6/bin/:/usr/games:/usr/lib/qt4/bin:/usr/bin:/opt/kde3/bin:/home/klaus/bin</pre>
<p>Pour que vos variables d&rsquo;environnement soit toujours bien positionnées. Il faut éditer le fichier <strong>~/.bashrc</strong> et ajouter dedans soit le contenu du fichier <strong>oracle_env.sh</strong>, soit une commande qui va exécuter les intructions de ce fichier. Une fois cela fait vous pouvez exécuter :</p>
<pre>[klaus@localhost bin]$ cd
[klaus@localhost ~]$ sqlplus

SQL*Plus: Release 10.2.0.1.0 - Production on Dim. Avr. 26 05:15:51 2009

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Entrez le nom utilisateur : system
Entrez le mot de passe :

Connecté à :
Oracle Database 10g Express Edition Release 10.2.0.1.0 - Production

SQL&gt;</pre>
<div id="art-pages-list"></div>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/19/oracle-sous-linux/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">256</post-id>	</item>
		<item>
		<title>Vi ou la Mort</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/19/vi-ou-la-mort/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/19/vi-ou-la-mort/#respond</comments>
				<pubDate>Fri, 19 Feb 2016 11:45:33 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Déboires]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=252</guid>
				<description><![CDATA[Alors que je venais d&#8217;installer Mandriva, et de comprendre comment modifier /boot/grub/menu.lst, je devais reporter ces modifications le plus vite possible, du moins avant de les oublier. Pas le temps de mettre à jour la liste des serveurs et d&#8217;installer... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/19/vi-ou-la-mort/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<div id="art-description">
<p>Alors que je venais d&rsquo;installer Mandriva, et de comprendre comment modifier /boot/grub/menu.lst, je devais reporter ces modifications le plus vite possible, du moins avant de les oublier. Pas le temps de mettre à jour la liste des serveurs et d&rsquo;installer emacs avec urpmi&#8230; D&rsquo;où une nécessité absolue d&rsquo;utiliser Vi (VIsual editor).</p>
<p>Vi est un éditeur très puissant et très souple, en mode console, installé par défaut sur toutes les distributions de Linux. Mais sa puissance est malheureusement dérisoire comparée à sa difficulté d&rsquo;utilisation. Ses concepteurs ont déployé toute leur imagination pour le rendre inutilisable : des raccourcis clavier impossibles à mémoriser, un mode d&rsquo;utilisation qui ne semblerait intuitif qu&rsquo;à un psychopathe, une convivialité réduite à un point qui dépasse votre entendement, tous les ingrédients ont été réunis pour rendre fou tout utilisateur normal. Seul un carteron d&rsquo;inconditionnels (boutonneux, appareil dentaire, lunettes à triple foyer, pull années 70 avec col en V) accepte de subir l&rsquo;inutile et excessive complexité de Vi.</p>
<p>Face à la question Vi ou la mort, que répondre ? On vous propose la mort sous deux formes différentes ! Seule une chance de survivre à Vi pourrait vous amener à le préférer à la mort. En même temps, seule une alternative comme la mort peut vous obliger à l&rsquo;utiliser. Je vous propose dans ces quelques chapitres des indications qui vous aideront, je l&rsquo;espère, à sortir vivant de cette épreuve. Cependant je ne vous garantis pas que vous serez intact, des mois de thérapie intensive sont à prévoir si vous n&rsquo;abandonnez pas maintenant.</p>
</div>
<h3>L&rsquo;épreuve de self-control</h3>
<p>L&rsquo;accomplissement de la première étape vous demandera toutes vos ressources. Vous devrez être capable de vous maîtriser pleinement et de garder votre sang-froid qui qu&rsquo;il arrive. Si jamais vous ne vous en sentez pas capable, faites demi-tour pendant qu&rsquo;il en est encore temps, c&rsquo;est-à-dire maintenant.</p>
<p>Si malgré mes avertissements itérés vous avez décidé de continuer, alors ouvrez un terminal et à vos risques et périls saisissez la commande :</p>
<pre>vi test</pre>
<p>Un éditeur vide devrait apparaître sur la console. Ne vous laissez pas accabler par sa laideur, et gardez votre calme. Essayez maintenant de saisir du texte&#8230; Comme vous le constatez rien ne se passe.</p>
<p>Surtout : <strong>gardez votre calme</strong> ! Vous devez résister à l&rsquo;envie de frapper l&rsquo;écran avec votre clavier ! Même si vous ne comprenez pas pourquoi ce fichu éditeur ne veut pas faire ce que vous lui demandez.</p>
<p>Si vous arrivez à lire ce message, c&rsquo;est que vous n&rsquo;avez pas encore détruit votre ordinateur, vous pouvez (et devez) donc passer à l&rsquo;épreuve suivante.</p>
<h3>Le mode insertion</h3>
<p>Vous avez lancé Vi, et aucune indication sur la façon d&rsquo;en sortir n&rsquo;apparaît. Vous n&rsquo;avez maintenant aucune issue. Le seul moyen d&rsquo;éviter le redémarage est de lire la suite de cet article.</p>
<p>Il existe deux <strong>modes</strong> en Vi,</p>
<ul>
<li>Le mode <strong>insertion</strong> : pour modifier le texte</li>
<li>Le mode <strong>command</strong> : pour éxecuter les opérations sur fichier, ou de recherche, format, etc.</li>
</ul>
<p>Dans tout éditeur digne de ce nom, le mode par défaut est le mode insertion. Mais la volonté irrépressible des concepteurs de Vi à accumuler une pléthore de difficultés inutiles les a poussé à adopter le mode command par défaut. C&rsquo;est pour cela que lorsque vous écrivez, rien ne se passe. Maintenant, je vais vous donner quelque chose qui n&rsquo;a pas de prix : les clés qui permettent de passer d&rsquo;un mode (ou plutôt d&rsquo;un monde) à l&rsquo;autre.</p>
<ul>
<li>insertion -&gt; command : esc</li>
<li>command &#8211; &gt; insertion : i</li>
</ul>
<p>Une fois traduit en français, cela signifie qu&rsquo;il suffit de taper i pour passer en mode insertion, et là cet éditeur de mes deux acceptera enfin d&rsquo;écrire ce que vous lui demandez d&rsquo;écrire. Une fois que vous serez lassé d&rsquo;écrire, saisissez esc pour repasser en mode commande. Pour quitter vi en enregistrant le fichier, saisissez la commande :</p>
<pre>:x</pre>
<div id="art-pages-list"></div>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/19/vi-ou-la-mort/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">252</post-id>	</item>
		<item>
		<title>RPM Build</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/17/rpm-build/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/17/rpm-build/#respond</comments>
				<pubDate>Wed, 17 Feb 2016 07:57:44 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Kit de survie]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=245</guid>
				<description><![CDATA[La contruction de rpms est une tâche incontournable pour déployer des applications sous Linux, mais hélas particulièrement difficile à prendre en main. J&#8217;ai perdu nombreuses heures parce que je n&#8217;avais pas sous la main un turoriel simple, allant droit à... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/17/rpm-build/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<p>La contruction de rpms est une tâche incontournable pour déployer des applications sous Linux, mais hélas particulièrement difficile à prendre en main. J&rsquo;ai perdu nombreuses heures parce que je n&rsquo;avais pas sous la main un turoriel simple, allant droit à ce qui a le plus d&rsquo;importance, et expliquant de façon précise le fonctionnement de rpmbuild.
</p>
<p>
C&rsquo;est de façon péremptoire que j&rsquo;ai décidé de rédiger le tutoriel qui m&rsquo;aurait permis de comprendre les bases de rpmbuild en deux heures au lieu de deux jours. Je serai bien entendu ravi de l&rsquo;améliorer en tenant compte de toutes les suggestions qui me seront faites.
</p>
<p>
La quantité d&rsquo;informations et de fichiers étant fort importante, j&rsquo;ai rédigé un tutoriel disponible dans les formats ci-dessous :
</p>
<ul>
<li> en <a href="http://enseignement.alexandre-mesle.com/rpmbuild/">html</a>
</li>
<li> en <a href="http://enseignement.alexandre-mesle.com/rpmbuild/rpmbuild.pdf">pdf</a>
</li>
<li> dans une <a href="http://enseignement.alexandre-mesle.com/rpmbuild/rpmbuild.tgz">archive</a>
</li>
</ul>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/17/rpm-build/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">245</post-id>	</item>
		<item>
		<title>Clonage de disque dur</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/16/clonage-de-disque-dur/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/16/clonage-de-disque-dur/#comments</comments>
				<pubDate>Tue, 16 Feb 2016 17:01:44 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Kit de survie]]></category>

		<guid isPermaLink="false">http://alexandre-mesle.com/?p=239</guid>
				<description><![CDATA[Lorsque l&#8217;on a passé des heures et des heures à installer des logiciels, configurer un système, trier des fichiers, et que l&#8217;on veut changer de disque dur ça fait vraiment mal&#8230; Que l&#8217;on soit sous windows ou sous Linux, ça... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/16/clonage-de-disque-dur/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<p>
Lorsque l&rsquo;on a passé des heures et des heures à installer des logiciels, configurer un système, trier des fichiers, et que l&rsquo;on veut changer de disque dur ça fait vraiment mal&#8230; Que l&rsquo;on soit sous windows ou sous Linux, ça met tout le monde d&rsquo;accord !
</p>
<p>
Une solution peut être de tout simplement copier/coller toute l&rsquo;arborescence dans le nouveau disque mais malheureusement ça ne fonctionne pas&#8230; La raison est simple : il existe une petite partie du disque qui contient les informations permettant à votre système de démarrer, et auxquelles ne pouvez pas accéder en vous baladant avec votre souris. Ces informations sont contenues au « début » de votre disque, dans une section que l&rsquo;on nomme le MBR (Master Boot Record). Le copier/coller n&rsquo;incluant pas le MBR, vous vous retrouvez avec un système qui ne démarre pas.</p>
<p>
Un autre problème se pose : si vous avez des partitions ? Plein de petites partitions, avec un magnifique dual boot en prime ! Vous êtes obligé, avant de faire la copie, de créer et de les formater sur le disque cible. Il vous est conseillé d&rsquo;être patient dans ce cas !
</p>
<p>
Ces inconvénients sont fort embarrassants, parce que le principe de la copie de disque, c&rsquo;est appuyer sur bouton, glander pendant un certain temps, et récupérer à la fin une copie conforme du disque d&rsquo;origine, MBR et partitionnements compris, quels que soient les formats de fichiers (windows, linux ou autre).
</p>
<p>
La solution est vraiment très simple, et c&rsquo;est précisément parce qu&rsquo;elle vraiment très simple que ça m&rsquo;a gonflé d&rsquo;y passer des heures. Par solidarité pour mes camarades d&rsquo;infortune, je vais exposer la démarche que j&rsquo;ai trouvé.
</p>
<h3>Linux</h3>
<p>Tout d&rsquo;abord vous devez vous procurer une version bootable de Linux (pour démarrer un ordinateur avec Linux sans l&rsquo;installer). Celle que j&rsquo;utilise est <a href="http://www.mageia.org/fr/">Mageia</a>, mais il y en a beaucoup d&rsquo;autres. Pourquoi ? Parce que vous ne pouvez démarrer en utilisant les disques que vous allez copier, si votre système a le malheur d&rsquo;écrire sur un des disques pendant la copie, je peux vous assurer que le duplicata sera une boucherie. Le fait de démarrer depuis une version bootable de Linux vous permet de lire les données de vos disques durs sans toucher aux données qu&rsquo;ils contiennent.
</p>
<p>
Les deux logiciels que nous utiliserons, et qui sont fournis systématiquement avec Linux, seront <a href="http://en.wikipedia.org/wiki/Fdisk#Unix-like_systems">fdisk</a> et <a href="http://fr.wikipedia.org/wiki/Dd_%28Unix%29">dd</a>. Attention, ce sont des machines à tuer ! Toute erreur transformera vos disques durs en champs de bataille ! Il faudra donc les utiliser avec les plus grandes précautions.
</p>
<p>
Téléchargez, gravez (il existe des versions pour clé USB), et redémarrez votre système sous Linux. Une fois cela fait, ouvrez un terminal (sous Mandriva : Menu -&gt; outil -&gt; konsole) et saisissez la commande <a href="http://en.wikipedia.org/wiki/Su_%28Unix%29">su</a> (inutile sur les Debian et dérivées&#8230;). Cette commande vous permet d&rsquo;exécuter des commandes d&rsquo;administration plus ou moins dangereuses&#8230;
</p>
<h3>Identifier les disques</h3>
<p>On arrive à la partie délicate. Linux utilise pour lister les disques des expressions comme <code>/dev/sda</code> ou encore <code>/dev/hdba</code> Vous trouverez toujours /dev/ en préfixe quelquefois un numéro à la fin, de sorte que les noms de vos disques seront de la forme <code>/dev/disquepartition</code> ou <code>/dev/disque</code>
</p>
<p>
Par exemple, si vous disposez d&rsquo;un disque dur contenant 3 partitions, le disque pourrait être représenté par <code>/dev/sdb</code> et chacune des partitions par <code>/dev/sdb0 /dev/sdb3 /dev/sdb4</code><br />
Attention, s&rsquo;il n&rsquo;y a pas de numéro à la fin de l&rsquo;expression, elle représente le disque entier, avec les partitions qu&rsquo;il contient.
</p>
<p>
Pour repérer vos disques, saisissez <code>fdisk -l</code> dans le terminal. Vous verrez s&rsquo;afficher la liste des partitions, regroupées par disque et avec pour chacune sa taille et son type.</p>
<pre>[guest@localhost ~]$ su<br />[root@localhost guest]# fdisk -l<br /><br />Disque /dev/sda: 120.0 Go, 120034123776 octets<br />255 heads, 63 sectors/track, 14593 cylinders<br />Units = cylindres of 16065 * 512 = 8225280 bytes<br />Disk identifier: 0x1477763c<br /><br />Périphérique Amorce    Début         Fin      Blocs    Id  Système<br />/dev/sda1   *           1        3423    27495216    6  FAT16<br />/dev/sda2            3424       14593    89723025    5  Extended<br />/dev/sda5            3424        3694     2176776   82  Linux swap / Solaris<br />/dev/sda6            3695       12366    69657808+  83  Linux<br />/dev/sda7           12367       14593    17888346    b  W95 FAT32<br /><br />Disque /dev/sdb: 2000.3 Go, 2000398934016 octets<br />255 heads, 63 sectors/track, 243201 cylinders<br />Units = cylindres of 16065 * 512 = 8225280 bytes<br />Disk identifier: 0x24796452<br /><br />Périphérique Amorce    Début         Fin      Blocs    Id  Système<br />/dev/sdb1   *           1      243201  1953512001   83  Linux</pre>
<p>
Repérez vos disques dans ce fatras et surtout ne vous gourez pas.
</p>
<h3>Glander</h3>
<p>Une fois vos deux disques repérés et tout doute levé, nous allons pouvoir faire la copie.</p>
<p>Comme dernière précaution je souhaiterais porter à votre connaissance le fait que <code>dd</code> est la commande la plus stupide qui soit : elle lit des octets sur un disque et les écrit sur un autre, sans essayer de comprendre ce qu&rsquo;elle fait. Elle va brutalement copier tout ce qu&rsquo;elle trouvera sur le disque : table de partitions, MBR, etc. Tout ça sans se poser de question et tout type de partitions confondues. Rien ne se mettra en travers de votre chemin si vous lui donnez de mauvaises indications : elle transformera un de vos disques durs en bouillie sans vous demander votre avis.</p>
<p>Pour rester dans le mode avertissement, vous devez vous assurer qu&rsquo;aucun des deux disques n&rsquo;est monté. Si vous utilisez <code>dd</code> alors qu&rsquo;un autre logiciel est en train d&rsquo;écrire sur un des deux volumes, des choses indescriptibles se produiront. En même temps si vous utilisez un OS bootable, il y a peu de chance que ces disques soient montés.</p>
<p>
La commande <code>dd</code> s&rsquo;utilise ainsi :
</p>
<p><code>dd if=source of=destination</code></p>
<p>
Si par exemple on souhaite recopier /dev/sca dans /dev/sdb, il suffit de faire
</p>
<p><code>dd if=/dev/sca of=/dev/sdb</code></p>
<p>
Attention, il s&rsquo;agit d&rsquo;une copie de disque, et non de partitions ! Si vous mettez des noms de partition en argument, les mots me manqueraient pour décrire le chaos qui s&rsquo;ensuivrait ! Et notez bien que comme l&rsquo;intégralité du disque source est recopié dans la cible, il faut que la cible soit plus grande que la source.
</p>
<p>
Maintenant vous avez largement le temps d&rsquo;aller casser la croûte, parce que ça peut prendre plusieurs heures&#8230;</p>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/16/clonage-de-disque-dur/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">239</post-id>	</item>
		<item>
		<title>Sauvegardes avec rsync</title>
		<link>http://alexandre-mesle.com/index.php/2016/02/09/sauvegardes-avec-rsync/</link>
				<comments>http://alexandre-mesle.com/index.php/2016/02/09/sauvegardes-avec-rsync/#comments</comments>
				<pubDate>Tue, 09 Feb 2016 14:28:34 +0000</pubDate>
		<dc:creator><![CDATA[Alexandre]]></dc:creator>
				<category><![CDATA[Kit de survie]]></category>

		<guid isPermaLink="false">http://wp.alexandre-mesle.com/?p=153</guid>
				<description><![CDATA[rsync est un outil puissant permettant de synchroniser des arborescences, pas nécessairement sur la même machine. Il est généralement utilisé pour faire des sauvegardes, mais on peut aussi par exemple s&#8217;en servir pour mettre un site en ligne. Il fait... <a class="more-link" href="http://alexandre-mesle.com/index.php/2016/02/09/sauvegardes-avec-rsync/">Continue Reading &#8594;</a>]]></description>
								<content:encoded><![CDATA[<div id="art-description">
<p>rsync est un outil puissant permettant de synchroniser des arborescences, pas nécessairement sur la même machine. Il est généralement utilisé pour faire des sauvegardes, mais on peut aussi par exemple s&rsquo;en servir pour mettre un site en ligne.</p>
<p>Il fait l&rsquo;inventaire des fichiers dans les deux répertoires et ne recopie que les fichiers soit qui n&rsquo;existent pas dans le répertoire cible, soit qui ont été modifiés depuis la dernière copie. Comme scp, rsync utilise un tunnel ssh lorsque l&rsquo;un des deux répertoires (ou les deux) à synchroniser est distant.</p>
<p>Nous allons voir les bases de rsync et la façon dont on peut s&rsquo;en servir pour faire des sauvegardes, nous allons voir ensuite comment il est possible d&rsquo;automatiser cette tâche et de régler le problème du mot de passe (<a href="http://www.puddingonline.com/~dave/publications/SSH-with-Keys-HOWTO/document/html/SSH-with-Keys-HOWTO.html#toc4">documentation</a>)</p>
</div>
<div class="box">
<h3 class="art-page-title">Commande et options</h3>
<p>Lorsque l&rsquo;on souhaite sauvegarder une arborescence sur un répertoire distant, on procède de la sorte :</p>
<pre>rsync --progress -avz repertoiresource/* login@hote:repertoirecible/</pre>
<p>Détaillons les options et arguments de cette commande :</p>
<ul>
<li>repertoiresource est le répertoire de votre disque dur dans lequel se trouve l&rsquo;arborescence à sauvegarder</li>
<li>login est votre login sur la machine distante</li>
<li>hote est le nom d&rsquo;hôte de la machine distante</li>
<li>repertoirecible est sur la machine le chemin vers le répertoire dans lequel vous souhaitez stocker les fichiers sauvegardés</li>
<li>&#8211;progress sert à afficher une jauge à chaque fois qu&rsquo;un fichier est transféré</li>
<li>-avz : le <strong>v</strong> sert à activer la verbosité, le <strong>a</strong> précise que l&rsquo;on utilise le mode « archive » (préservation des liens symboliques, des droits, etc.), <strong>z</strong> compresse les fichiers pendant le transfert.</li>
</ul>
<p>Vous remarquerez que pour que tout cela fonctionne, vous devez saisir votre mot de passe&#8230;</p>
<p>A chaque fois que cette commande sera invoquée, le répertoire distant sera synchronisé avec le répertoire source. Comme seuls les fichiers nouveaux ou modifiés sont transférés, la synchronisation est très rapide. Vous noterez que contrairement à ce que le mot synchronisation laisse entendre, la sauvegarde ne se fait que depuis la source vers la cible. Si vous modifiez des fichiers dans le répertoire cible, ils ne seront jamais recopiés dans le répertoire source par rsync.</p>
<div id="art-pages-list">
<h3 class="art-page-title">Le mot de passe</h3>
<p>Le problème qui se pose lorsque vous lancez la sauvegarde est que systématiquement un mot de passe vous est demandé. Le caractère fastidieux de cette saisie peut, à la longue, s&rsquo;avérer fort pénible. La solution qui a mes yeux semble la plus élégante est d&rsquo;utiliser la cryptographie asymétrique.</p>
<p>Avant de lire la suite, vous devez accepter l&rsquo;idée qu&rsquo;il est impossible de passer le mot de passe en argument à rsync, il vous enverra promener systématiquement et je vous avoue qu&rsquo;au niveau sécurité ça laisserait franchement à désirer.</p>
<p>Pour commencer vous devez créer un couple de clés RSA, l&rsquo;une des clés est la clé publique et l&rsquo;autre la clé privée. La clé privée va vous servir à signer électroniquement un document, et la clé publique servira à vérifier que la signature est correcte. Vous devez donc mettre sur le serveur distant votre clé publique et conserver sur votre disque dur votre clé privée. A chaque tentative de connexion, le serveur va vous envoyer une donnée qui sera automatiquement signée à l&rsquo;aide de votre clé privée, puis retournée au serveur. Le serveur va ensuite utiliser votre clé publique pour s&rsquo;assurer que la signature est correcte. Si c&rsquo;est le cas, la demande de connexion sera acceptée, sinon elle sera refusée.</p>
<p>Cela signifie que vous n&rsquo;aurez plus jamais besoin de saisir de votre mot de passe lorsque, depuis une machine disposant de votre clé publique, vous vous connecterez en ssh (ou avec une commande utilisant ssh, par exemple scp et rsync).</p>
<p>Vous devrez donc :</p>
<ul>
<li>Générer un couple de clés RSA</li>
<li>Recopier votre clé publique sur le serveur</li>
</ul>
<p>Je me suis librement inspiré <a href="http://www.linuxhorizon.ro/ssh-wo-passw.html">cette page</A>.</p>
<h4>Génération d&rsquo;un couple de clés</h4>
<p>On génère un couple de clés avec la commande ssh-keygen :</p>
<pre>ssh-keygen -t rsa</pre>
<p>Vous pouvez conserver toutes les options par défaut. Une fois l&rsquo;exécution de cette commande terminée, deux fichiers id_rsa et id_rsa.pub sont crées dans le repértoire $HOME/.ssh/. id_rsa.pub est votre clé publique et id_rsa est votre clé privée.</p>
<h4>Envoi de la clé publique sur le serveur</h4>
<p>Il suffit d&rsquo;utiliser la commande scp pour envoyer id_rsa.pub sur le serveur ssh. On procède de la façon suivante :</p>
<pre>scp $HOME/.ssh/id_rsa.pub login@hote:.ssh/authorized_keys</pre>
<p>login est votre login sur la machine distante, et hote est le hostname de la machine distante. Et pour la dernière fois, vous devrez saisir votre mot de passe !Il ne faudra pas oublier de gérer les droits du fichier $HOME/.ssh/authorized_keys en le mettant en 700 :</p>
<pre>ssh login@hote "chmod 700 .ssh/authorized_keys"</pre>
</div>
</div>
]]></content:encoded>
							<wfw:commentRss>http://alexandre-mesle.com/index.php/2016/02/09/sauvegardes-avec-rsync/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">153</post-id>	</item>
	</channel>
</rss>
